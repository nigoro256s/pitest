<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="format-detection" content="telephone=no">
    <title>PiTest</title>
    <style>
        body {
            align-items: center;
            background-color: black;
            color: white;
            display: flex;
            font-size: 200%;
            font-family: monospace;
            flex-direction: column;
        }

        .hint {
            background-color: white;
            color: black;
        }

        .inputbutton {
            border: 1px solid;
            display: inline-block;
            font-size: 200%;
            margin: 12.5px 5px;
            padding: 10px 25px;
        }
    </style>
</head>

<body>
    <div id="di" style="font-size: 400%; margin-top: 25px;">PI</div>
    <div id="pi"><br></div>
    <div style="margin-top: 25px;">
        <div>
            <span class="inputbutton" onclick="entry(7)">7</span>
            <span class="inputbutton" onclick="entry(8)">8</span>
            <span class="inputbutton" onclick="entry(9)">9</span>
        </div>
        <div>
            <span class="inputbutton" onclick="entry(4)">4</span>
            <span class="inputbutton" onclick="entry(5)">5</span>
            <span class="inputbutton" onclick="entry(6)">6</span>
        </div>
        <div>
            <span class="inputbutton" onclick="entry(1)">1</span>
            <span class="inputbutton" onclick="entry(2)">2</span>
            <span class="inputbutton" onclick="entry(3)">3</span>
        </div>
        <div>
            <span class="inputbutton" onclick="back()" id="f0" style="visibility: hidden;">&lt;</span>
            <span class="inputbutton" onclick="entry(0)">0</span>
            <span class="inputbutton" onclick="start()" id="f1">&gt;</span>
            <span class="inputbutton" onclick="help()" id="f2" style="display: none;">?</span>
        </div>
    </div>
    <script>
        var dielm = document.getElementById("di");
        var pielm = document.getElementById("pi");
        var pistr = "1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989";
        function shownum(count) {
            dielm.textContent = count;
            function spacing(text) {
                for (var i = Math.floor((text.length - 1) * 0.1); 0 <= i; i--) {
                    text = text.slice(0, 10 * i + 10) + " " + text.slice(10 * i + 10);
                }
                return text;
            }
            if (count <= 40) {
                pielm.innerHTML = "3." + spacing(pistr.slice(0, count)) + "<br><br><br><br><br><br><br><br><br><br><br>";
            }
            else if (count <= 400) {
                pielm.innerHTML = "3.1415926535 8979323846 2643383279 5028841971&nbsp;&nbsp;<br>";
                var tmpnum = 0;
                while (40 * tmpnum + 80 < count) {
                    pielm.innerHTML += "&nbsp;&nbsp;" + spacing(pistr.slice(40 * tmpnum + 40, 40 * tmpnum + 80)) + "<br>";
                    tmpnum++;
                }
                var tmpmod = count % 40;
                if (tmpmod == 0) {tmpmod = 40;}
                pielm.innerHTML += "&nbsp;&nbsp;" + spacing(pistr.slice(40 * tmpnum + 40, 40 * tmpnum + 40 + tmpmod));
                for (var i = 0; i <= 9 - tmpnum; i++) {
                    pielm.innerHTML += "<br>";
                }
            }
            else {
                var tmpnum = Math.floor((count - 1) * 0.025);
                pielm.innerHTML = "..." + spacing(pistr.slice(40 * tmpnum - 360, 40 * tmpnum - 320)).slice(3) + "<br>";
                for (var i = 0; i <= 7; i++) {
                    pielm.innerHTML += spacing(pistr.slice(40 * tmpnum + 40 * i - 320, 40 * tmpnum + 40 * i - 280)) + "<br>";
                }
                var tmpmod = count % 40;
                if (tmpmod == 0) {tmpmod = 40;}
                pielm.innerHTML += spacing(pistr.slice(40 * tmpnum, 40 * tmpnum + tmpmod));
            }
        }
        function shownumandhint(count) {
            dielm.textContent = count;
            function spacing(text) {
                for (var i = Math.floor((text.length - 1) * 0.1); 0 <= i; i--) {
                    text = text.slice(0, 10 * i + 10) + " " + text.slice(10 * i + 10);
                }
                return text.slice(0, -1);
            }
            if (count == 0) {
                pielm.innerHTML = "3.<span class='hint'>1415926535 8979323846 2643383279 5028841971</span><br><br><br><br><br><br><br><br><br><br><br>";   
            }
            else if (count <= 40) {
                var tmpstr = spacing("1415926535897932384626433832795028841971");
                pielm.innerHTML = "3." + tmpstr.slice(0, count + Math.floor((count - 1) * 0.1)) + "<span class='hint'>" + tmpstr.slice(count + Math.floor((count - 1) * 0.1)) + "<br>&nbsp;&nbsp;6939937510 5820974944 5923078164 0628620899</span><br><br><br><br><br><br><br><br><br><br>";
            }
            else if (count <= 400) {
                pielm.innerHTML = "3.1415926535 8979323846 2643383279 5028841971&nbsp;&nbsp;<br>";
                var tmpnum = 0;
                while (40 * tmpnum + 80 < count) {
                    pielm.innerHTML += "&nbsp;&nbsp;" + spacing(pistr.slice(40 * tmpnum + 40, 40 * tmpnum + 80)) + "<br>";
                    tmpnum++;
                }
                var tmpmod = count % 40;
                if (tmpmod == 0) {tmpmod = 40;}
                var tmpstr = spacing(pistr.slice(40 * tmpnum + 40, 40 * tmpnum + 80));
                pielm.innerHTML += "&nbsp;&nbsp;" + tmpstr.slice(0, tmpmod + Math.floor((tmpmod - 1) * 0.1)) + "<span class='hint'>" + tmpstr.slice(tmpmod + Math.floor((tmpmod - 1) * 0.1)) + "<br>&nbsp;&nbsp;" + spacing(pistr.slice(40 * tmpnum + 80, 40 * tmpnum + 120)) + "</span>";
                for (var i = 0; i <= 8 - tmpnum; i++) {
                    pielm.innerHTML += "<br>";
                }
            }
            else {
                var tmpnum = Math.floor((count - 1) * 0.025);
                pielm.innerHTML = "..." + spacing(pistr.slice(40 * tmpnum - 360, 40 * tmpnum - 320)).slice(3) + "<br>";
                for (var i = 0; i <= 7; i++) {
                    pielm.innerHTML += spacing(pistr.slice(40 * tmpnum + 40 * i - 320, 40 * tmpnum + 40 * i - 280)) + "<br>";
                }
                var tmpmod = count % 40;
                if (tmpmod == 0) {tmpmod = 40;}
                var tmpstr = spacing(pistr.slice(40 * tmpnum, 40 * tmpnum + 40));
                pielm.innerHTML += tmpstr.slice(0, tmpmod + Math.floor((tmpmod - 1) * 0.1)) + "<span class='hint'>" + tmpstr.slice(tmpmod + Math.floor((tmpmod - 1) * 0.1)) + "<br>" + spacing(pistr.slice(40 * tmpnum + 40, 40 * tmpnum + 80)) + "</span>";
            }
        }
        var state = -1;
        var nowcount = 0;
        function entry(num) {
            if (state == -1) {
                pielm.textContent += num;
            }
            else if (state == 0) {
                if (num == pistr[nowcount]) {
                    nowcount++;
                    shownum(nowcount);
                }
            }
        }
        function start() {
            nowcount = Number(pielm.textContent);
            shownum(nowcount);
            document.getElementById("f0").style.visibility = "visible";
            document.getElementById("f1").style.display = "none";
            document.getElementById("f2").style.display = "inline-block";
            state = 0;
        }
        function help() {
            if (state == 0) {
                state = 1;
                shownumandhint(nowcount);
            }
            else {
                state = 0;
                shownum(nowcount);
            }
        }
        function back() {
            if (state == 0) {
                nowcount = Math.max(0, nowcount - 10);
                shownum(nowcount);
            }
        }
    </script>
</body>

</html>